# ğŸ”§ ×”×¤×¢×œ×ª ×”×‘×•×˜ ×‘×¦×•×¨×” ××§×¦×•×¢×™×ª ×¢× PM2

## ××”×• PM2?
PM2 ×”×•× ×× ×”×œ ×ª×”×œ×™×›×™× ×œNode.js ×©×××¤×©×¨:
- âœ… ×”×¨×¦×ª ×”×‘×•×˜ ×‘×¨×§×¢ (××¤×™×œ×• ××—×¨×™ ×¡×’×™×¨×ª ×”×˜×¨××™× ×œ)
- âœ… ×”×¤×¢×œ×” ××•×˜×•××˜×™×ª ××—×¨×™ ××ª×—×•×œ ×”××—×©×‘
- âœ… ×”×¤×¢×œ×” ××—×“×© ××•×˜×•××˜×™×ª ×‘××§×¨×” ×©×œ ×§×¨×™×¡×”
- âœ… × ×™×˜×•×¨ ×•×œ×•×’×™×

---

## ×”×ª×§× ×” ×•×”×¤×¢×œ×”

### ×©×œ×‘ 1: ×”×ª×§×Ÿ ××ª PM2
```bash
npm install -g pm2
```

### ×©×œ×‘ 2: ×”×¤×¢×œ ××ª ×”×‘×•×˜
```bash
pm2 start whatsapp-football-bot.js --name football-bot
```

### ×©×œ×‘ 3: ×©××•×¨ ××ª ×”×”×’×“×¨×•×ª
```bash
pm2 save
```

### ×©×œ×‘ 4: ×”×’×“×¨ ×”×¤×¢×œ×” ××•×˜×•××˜×™×ª
```bash
pm2 startup
```
×–×” ×™×™×ª×Ÿ ×œ×š ×¤×§×•×“×” ×œ×”×¨×™×¥ (copy-paste ××•×ª×” ×•×”×¨×¥)

---

## ×¤×§×•×“×•×ª ×©×™××•×©×™×•×ª

### ×‘×“×™×§×ª ×¡×˜×˜×•×¡
```bash
pm2 status
```

×ª×¨××” ××©×”×• ×›×–×”:
```
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id  â”‚ name             â”‚ mode    â”‚ â†º       â”‚ status  â”‚ cpu      â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0   â”‚ football-bot     â”‚ fork    â”‚ 0       â”‚ online  â”‚ 0%       â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ×¦×¤×™×™×” ×‘×œ×•×’×™×
```bash
# ×œ×•×’×™× ×‘×–××Ÿ ×××ª
pm2 logs football-bot

# 100 ×”×©×•×¨×•×ª ×”××—×¨×•× ×•×ª
pm2 logs football-bot --lines 100

# ×¨×§ ×©×’×™××•×ª
pm2 logs football-bot --err
```

### ×”×¤×¢×œ×” ××—×“×©
```bash
# ×”×¤×¢×œ×” ××—×“×© ×¨×’×™×œ×”
pm2 restart football-bot

# ×”×¤×¢×œ×” ××—×“×© ×¢× ×˜×¢×™× ×ª ×§×•×“ ××—×“×©
pm2 reload football-bot
```

### ×¢×¦×™×¨×ª ×”×‘×•×˜
```bash
# ×¢×¦×™×¨×” ×–×× ×™×ª
pm2 stop football-bot

# ××—×™×§×” ×œ×’××¨×™
pm2 delete football-bot
```

### ××™×“×¢ ××¤×•×¨×˜
```bash
pm2 show football-bot
```

### × ×™×˜×•×¨ ×‘×–××Ÿ ×××ª
```bash
pm2 monit
```

---

## ğŸ“Š ×”×’×“×¨×ª × ×™×˜×•×¨ ××ª×§×“×

×¦×•×¨ ×§×•×‘×¥ ×‘×©× `ecosystem.config.js`:

```javascript
module.exports = {
  apps: [{
    name: 'football-bot',
    script: './whatsapp-football-bot.js',
    
    // ×”×’×“×¨×•×ª × ×™×˜×•×¨
    instances: 1,
    exec_mode: 'fork',
    
    // ×”×¤×¢×œ×” ××—×“×© ××•×˜×•××˜×™×ª
    autorestart: true,
    watch: false,
    max_memory_restart: '500M',
    
    // ××©×ª× ×™ ×¡×‘×™×‘×”
    env: {
      NODE_ENV: 'production'
    },
    
    // ×œ×•×’×™×
    error_file: './logs/err.log',
    out_file: './logs/out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
    
    // × ×™×¡×™×•×Ÿ ×—×•×–×¨ ×‘××§×¨×” ×©×œ ×›×©×œ
    max_restarts: 10,
    min_uptime: '10s',
    
    // ×¢×™×›×•×‘ ×‘×™×Ÿ ×”×¤×¢×œ×•×ª ××—×“×©
    restart_delay: 4000
  }]
};
```

×”×¤×¢×œ ×¢×:
```bash
pm2 start ecosystem.config.js
```

---

## ğŸ”„ ×¢×“×›×•×Ÿ ×”×‘×•×˜

×›×©××ª×” ××©× ×” ××ª ×”×§×•×“:

```bash
# 1. ×¢×¦×•×¨ ××ª ×”×‘×•×˜
pm2 stop football-bot

# 2. ×¢×¨×•×š ××ª ×”×§×•×“
nano whatsapp-football-bot.js

# 3. ×”×¤×¢×œ ××—×“×©
pm2 restart football-bot

# ××• ×‘×¤×§×•×“×” ××—×ª:
pm2 reload football-bot
```

---

## ğŸ“± ×”×ª×¨××•×ª ×œ×˜×œ×¤×•×Ÿ (××•×¤×¦×™×•× ×œ×™)

××¤×©×¨ ×œ×§×‘×œ ×”×ª×¨××•×ª ×œ×˜×œ×¤×•×Ÿ ×›×©×”×‘×•×˜ × ×•×¤×œ:

```bash
# ×”×ª×§×Ÿ PM2 Web
pm2 install pm2-server-monit
```

---

## ğŸ›¡ï¸ ×’×™×‘×•×™ ×•×”×—×–×¨×”

### ×©××•×¨ ××ª ×”×”×’×“×¨×•×ª ×”× ×•×›×—×™×•×ª
```bash
pm2 save
```

### ×©×—×–×¨ ×”×’×“×¨×•×ª
```bash
pm2 resurrect
```

---

## ğŸ—‚ï¸ × ×™×”×•×œ ××¨×•×‘×” ×‘×•×˜×™×

×× ×™×© ×œ×š ×›××” ×‘×•×˜×™×:

```bash
# ×”×¦×’ ××ª ×›×•×œ×
pm2 list

# ×”×¤×¢×œ ××—×“×© ××ª ×›×•×œ×
pm2 restart all

# ×¦×¤×” ×‘×œ×•×’×™× ×©×œ ×›×•×œ×
pm2 logs

# ×¢×¦×•×¨ ××ª ×›×•×œ×
pm2 stop all
```

---

## ğŸ› ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª

### ×”×‘×•×˜ ×œ× × ×©××¨ ××—×¨×™ ××ª×—×•×œ

```bash
# ×”×¨×¥ ××ª startup ×©×•×‘
pm2 startup

# ×”×¨×¥ ××ª ×”×¤×§×•×“×” ×©×”×•× × ×ª×Ÿ ×œ×š

# ×©××•×¨
pm2 save
```

### PM2 ×œ× ××•×›×¨

```bash
# ×”×ª×§×Ÿ ×’×œ×•×‘×œ×™×ª ×¢× sudo (Linux/Mac)
sudo npm install -g pm2

# Windows: ×”×¨×¥ ××ª CMD ×›×× ×”×œ
npm install -g pm2
```

### ×”×‘×•×˜ ×§×•×¨×¡ ×›×œ ×”×–××Ÿ

```bash
# ×‘×“×•×§ ×œ×•×’×™×
pm2 logs football-bot --lines 50

# ×”×’×“×œ ××ª ×”×–×™×›×¨×•×Ÿ ×”××§×¡×™××œ×™
pm2 restart football-bot --max-memory-restart 1G
```

---

## ğŸ“ˆ × ×™×˜×•×¨ ×¦×¨×™×›×ª ××©××‘×™×

### ×‘×“×™×§×ª ×¦×¨×™×›×ª ×–×™×›×¨×•×Ÿ ×•-CPU
```bash
pm2 monit
```

### ××™×“×¢ ××¤×•×¨×˜ ×¢×œ ×”×ª×”×œ×™×š
```bash
pm2 show football-bot
```

---

## ğŸš€ ×¡×§×¨×™×¤×˜ ×”×¤×¢×œ×” ××”×™×¨×”

×¦×•×¨ ×§×•×‘×¥ `deploy.sh`:

```bash
#!/bin/bash

echo "ğŸš€ ××¤×¢×™×œ ××ª ×‘×•×˜ ×”×›×“×•×¨×’×œ..."

# ×‘×“×•×§ ×× PM2 ××•×ª×§×Ÿ
if ! command -v pm2 &> /dev/null; then
    echo "ğŸ“¦ ××ª×§×™×Ÿ PM2..."
    npm install -g pm2
fi

# ×‘×“×•×§ ×× ×”×‘×•×˜ ×¨×¥
if pm2 list | grep -q "football-bot"; then
    echo "ğŸ”„ ××¤×¢×™×œ ××—×“×© ××ª ×”×‘×•×˜..."
    pm2 restart football-bot
else
    echo "â–¶ï¸ ××¤×¢×™×œ ××ª ×”×‘×•×˜ ×‘×¤×¢× ×”×¨××©×•× ×”..."
    pm2 start whatsapp-football-bot.js --name football-bot
fi

# ×©××•×¨ ×”×’×“×¨×•×ª
pm2 save

echo "âœ… ×”×‘×•×˜ ××•×›×Ÿ!"
echo ""
echo "ğŸ“ ×¤×§×•×“×•×ª ×©×™××•×©×™×•×ª:"
echo "  pm2 status        - ×¡×˜×˜×•×¡ ×”×‘×•×˜"
echo "  pm2 logs          - ×œ×•×’×™× ×‘×–××Ÿ ×××ª"
echo "  pm2 monit         - × ×™×˜×•×¨"
echo "  pm2 restart football-bot  - ×”×¤×¢×œ×” ××—×“×©"
```

×”×¤×¢×œ:
```bash
chmod +x deploy.sh
./deploy.sh
```

---

## âœ… ×¦'×§×œ×™×¡×˜ ×”×¤×¢×œ×”

- [ ] PM2 ××•×ª×§×Ÿ (`pm2 --version`)
- [ ] ×”×‘×•×˜ ×¨×¥ (`pm2 status`)
- [ ] ×”×’×“×¨×•×ª × ×©××¨×• (`pm2 save`)
- [ ] ×”×¤×¢×œ×” ××•×˜×•××˜×™×ª ××•×’×“×¨×ª (`pm2 startup`)
- [ ] ×œ×•×’×™× × ×’×™×©×™× (`pm2 logs`)

---

**×¢×›×©×™×• ×”×‘×•×˜ ×©×œ×š ×¨×¥ ×‘×¦×•×¨×” ××§×¦×•×¢×™×ª! ğŸ‰**

×× ×™×© ×‘×¢×™×•×ª, ×‘×“×•×§ ××ª ×”×œ×•×’×™× ×¢× `pm2 logs football-bot`
